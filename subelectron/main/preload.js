var{contextBridge:_,ipcRenderer:a}=require("electron"),d=function(s){a.send("se",JSON.stringify(s)+`
`)},h=1024,p=-1,i={},c={};function u(s,r,o,e){clearTimeout(r),delete c[s],o(e)}var f={_onMsg(s,r){let[o,e,t]=JSON.parse(r);if(o>0)try{let n=i[e](e,t);Promise.resolve(n).then(function(l){d([o,e,l])})}catch(n){console.error(`ipc: failed to respond to request#${o}: ${e}`,{arg:t,ex:n}),d([o,"_err",String(n)])}else if(o<0){let n=c[o];n?e!="_err"?n[0](t):n[1](t):console.error("ipc: unexpected response",e,t)}else{let n=i[e];n?n(e,t):console.error("ipc: unhandled event",e,t)}},send(s,r=null){d([0,s,r])},on(s,r){i[s]=r},cancel(s){let r=i[s];return delete i[s],r},ask(s,r=null,o=null){let e=p;return p=e>-h?e-1:-1,new Promise(function(t,n){if(!o)c[e]=[t,n];else{let l=setTimeout(function(g){delete c[e],n(g)},o);c[e]=[u.bind(e,l,t),u.bind(e,l,n)]}d([e,s,r])})}};a.on("se",f._onMsg);_.exposeInMainWorld("ipc",f);a.send("preloaded",!0);
